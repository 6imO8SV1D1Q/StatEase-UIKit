{
  "id": "ts_04",
  "title": "系列相関",
  "subtitle": "自己相関を測る",
  "estimated_minutes": 5,
  "category": "timeseries",
  "topic": "時系列データの処理",
  "summary": "時系列の自己相関を計算する方法と、値が示す意味を学びます。",
  "learning_objectives": [
    "ラグ別の自己相関を計算できる",
    "自己相関が持つ意味を解釈できる",
    "系列相関を利用した判断ポイントを説明できる"
  ],
  "prerequisites": [],
  "steps": [
    {
      "id": "ts_04_step01",
      "order": 1,
      "type": "text",
      "title": "自己相関とは",
      "body": "",
      "paragraphs": [
        {
          "title": "ラグを伴う相関",
          "body": "自己相関は、時系列データが過去の自分自身とどれだけ似ているかを測ります。ラグ1なら1期前、ラグ12なら1年前との相関です。"
        },
        {
          "title": "トレンド・季節の検出",
          "body": "自己相関が高いと、トレンドや季節性が強い可能性があります。モデル化する際の手掛かりになります。"
        }
      ]
    },
    {
      "id": "ts_04_step02",
      "order": 2,
      "type": "text",
      "title": "計算方法",
      "body": "",
      "paragraphs": [
        {
          "title": "自己相関係数",
          "body": "ラグ \\(k\\) の自己相関係数 \\(\\rho_k\\) は \\(\\frac{\\sum_{t=k+1}^{n} (x_t-\\bar{x})(x_{t-k}-\\bar{x})}{\\sum_{t=1}^{n} (x_t-\\bar{x})^2}\\) で求められます。"
        },
        {
          "title": "実装例",
          "body": "Excelでは `=CORREL(range, OFFSET(range, -k, 0))`、Pythonでは `pandas.Series.autocorr(lag=k)` を使うと簡単に計算できます。"
        }
      ]
    },
    {
      "id": "ts_04_step03",
      "order": 3,
      "type": "text",
      "title": "例：月次売上の自己相関",
      "body": "",
      "paragraphs": [
        {
          "title": "ラグ1とラグ12",
          "body": "ラグ1の自己相関が0.8、ラグ12が0.5であれば、直近の値と似た動きをしつつ、前年同月ともそれなりに似ている季節性を持つと解釈できます。"
        },
        {
          "title": "モデリングへの示唆",
          "body": "AR(1)モデルや季節調整を検討するなど、自己相関を手がかりにモデルの形を決めていきます。"
        }
      ]
    },
    {
      "id": "ts_04_step04",
      "order": 4,
      "type": "text",
      "title": "注意点",
      "body": "",
      "paragraphs": [
        {
          "title": "非定常データ",
          "body": "トレンドがあるシリーズは自己相関が高く出やすいので、差分を取るなどして定常化してから評価します。"
        },
        {
          "title": "信頼区間",
          "body": "自己相関の有意性を判断するには、標準誤差 \\(1/\\sqrt{n}\\) を目安に信頼区間を確認します。"
        }
      ]
    }
  ],
  "resources": {
    "key_terms": [
      "自己相関",
      "ラグ",
      "定常性"
    ],
    "external_links": []
  }
}
